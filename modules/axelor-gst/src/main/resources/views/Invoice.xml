<?xml version="1.0" encoding="UTF-8"?>

<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.1.xsd">

	<selection name="status-selection">
		<option value="draft">Draft</option>
		<option value="validate">Validate</option>
		<option value="paid">Paid</option>
		<option value="cancel">Cancel</option>
	</selection>

	<grid model="com.axelor.gst.db.Invoice" title="Invoices"
		name="invoice-grid">
		<field name="status" />
		<field name="companies" />
		<field name="reference" />
		<field name="invoiceDateT" />
		<field name="priority" />
		<field name="partys" />
		<field name="partyContact" />
		<field name="invoiceAddress" />
		<field name="shippingAddress" />
		<field name="useInvoiceAddressAsShipping" />
		<field name="netAmount" />
		<field name="netIGST" />
		<field name="netCSGT" />
		<field name="netSGST" />
		<field name="grossAmount" />
		<field name="invoiceItems" />
	</grid>

	<form model="com.axelor.gst.db.Invoice" title="Invoice"
		name="invoice-form" width="large"
		onNew="action-set-invoice-product-n-date" onSave="action-set-seq">
		<panel title="Invoice" css="panel-red">
			<field name="status" selection="status-selection"
				widget="NavSelect" colSpan="8" />
			<button-group>
				<button name="Draft" title="Draft"
					onClick="action-status-draft"  hidden="true" showIf=" status == 'validate' " />
				<button name="validate" title="Validate"
					onClick="action-status-validate" hidden="true" showIf= " status == 'draft' " />
				<button name="paid" title="Paid" onClick="action-status-paid" hidden="true" showIf=" status == 'validate' " />
				<button name="cancel" title="Cancel"
					onClick="action-status-cancel"  hidden="true" showIf=" status == 'validate' " />
			</button-group>
			<field name="companies"
				onChange="action.invoicce-validate-invoice.item,action-invoice-party-recalc,action-invoice-set-amount" />
			<field name="reference" />
			<field name="invoiceDateT" />
			<field name="priority" />
			<field name="party" onChange="action-invoice.party.set-values,action.invoicce-validate-invoice.item,action-invoice-party-recalc,action-invoice-set-amount" />
			<field name="partyContact" />
			<field name="invoiceAddress" />
			<field name="shippingAddress" />
			<field name="useInvoiceAddress" onChange="set-useasshipping" />
			<field name="netAmount" />	
			<field name="netIGST" />
			<field name="netCSGT" />
			<field name="netSGST" />
			<field name="grossAmount" />
			<field name="invoiceItems" onChange="action-invoice-set-amount"
				colSpan="12" />
		</panel>
	</form>
	
		<action-method name="action-invoice-party-recalc">
		<call class="com.axelor.gst.db.web.GstController"
			method="setvalidationParty" />
	</action-method>

	<action-attrs name="action-party-validation">
		<attribute name="value" for="partyContact"
			if="party == null" expr="null" />
	</action-attrs>

	<action-method name="action-invoice.party.set-values">
		<call class="com.axelor.gst.db.web.GstController"
			method="setparty" />
	</action-method>

	<action-attrs name="action.invoicce-validate-invoice.item">
		<attribute name="readonly" for="invoiceItems"
			expr="eval: companies == null || party == null " />
	</action-attrs>
	
	

	<action-method name="action-product-getId">
		<call class="com.axelor.gst.db.web.ProductController"
			method="getproductInvoiceItem" />
	</action-method>

	<action-record name="date-set"
		model="com.axelor.gst.db.Invoice">
		<field name="invoiceDateT" expr="eval: __datetime__" />
	</action-record>

	<action-method name="action-set-useasshipping">
		<call class="com.axelor.gst.db.web.GstController"
			method="setInvoice_as_shipping" />
	</action-method>

	<action-method name="action-invoice-set-amount">
		<call class="com.axelor.gst.db.web.GstController"
			method="setInvoiceAmount" />
	</action-method>

	<action-group name="action-set-invoice-product-n-date">
		<action name="date-set" />
		<action name="action-product-getId" />
		<action name="action.invoicce-validate-invoice.item" />
	</action-group>

	<action-attrs name="action-status-cancel">
		<attribute name="value" for="status" expr="cancel" />
	</action-attrs>
	<action-attrs name="action-status-validate">
		<attribute name="value" for="status" expr="validate" />
	</action-attrs>
	<action-attrs name="action-status-paid">
		<attribute name="value" for="status" expr="paid" />
	</action-attrs>
	<action-attrs name="action-status-draft">
		<attribute name="value" for="status" expr="draft" />
	</action-attrs>

<action-method name="action-set-seq">
<call class="com.axelor.gst.db.web.SequenceController" method="incrementseq"/>
</action-method>

</object-views>